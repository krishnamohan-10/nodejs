JSP + Servlet Session Tracking using Cookies

index.jsp
<jsp:forward page="CookieServlet" />
CookieServlet.java import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
public class CookieServlet extends HttpServlet {
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
response.setContentType("text/html");
PrintWriter out = response.getWriter();
boolean found = false;
Cookie[] cookies = request.getCookies();
// Check for existing cookie
if (cookies != null) {
for (Cookie cookie : cookies) {
if (cookie.getName().equals("user")) {
found = true;
break;
}
}
}
// If cookie found
if (found) {
out.println("<h2>Welcome back, user!</h2>");
} else {
// Set new cookie
Cookie userCookie = new Cookie("user", "true");
userCookie.setMaxAge(60 * 60); // 1 hour
response.addCookie(userCookie);
out.println("<h2>Welcome, new user!</h2>");
}
}
} web.xml <web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" version="3.1">
<servlet>
<servlet-name>CookieServlet</servlet-name>
<servlet-class>CookieServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>CookieServlet</servlet-name>
<url-pattern>/CookieServlet</url-pattern>
</servlet-mapping>
</web-app>
